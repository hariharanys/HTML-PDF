<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button id="downloadButton">Download</button>
    <script>
      document
        .getElementById("downloadButton")
        .addEventListener("click", async () => {
          // Make a POST request to trigger PDF generation
          const response = await fetch("http://localhost:3000/create_pdf", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              invoiceNo: "18",
              tenant: "SHLOKLABS",
              suite: "5",
              address: "Sowripalayam Pirivu, Ramanathapuram, Coimbatore",
              billFrom: "21-01-2024",
              billTo: "22-01-2024",
              dateRaised: "20-01-2024",
              meterInfo: [
                {
                  meterName: "GF_AS_PSB-G-A1",
                  serialNo: "30",
                  fromDate: "01-06-2024",
                  toDate: "30-06-2024",
                  openRead: "41,003",
                  closeRead: "41,546",
                  itemName: "ELECTRICITY",
                  quantity: "543.49",
                  units: "kWh",
                  unitPrice: "Rs.65.00",
                  unit: "Rs/kWh",
                  price: "Rs.255287.25",
                  netTotal: "Rs.255287.25",
                  total: "Rs.255287.25",
                },
                {
                  meterName: "GF_AS_PSB-G-A1",
                  serialNo: "30",
                  fromDate: "01-06-2024",
                  toDate: "30-06-2024",
                  openRead: "41,003",
                  closeRead: "41,546",
                  itemName: "ELECTRICITY",
                  quantity: "543.49",
                  units: "kWh",
                  unitPrice: "Rs.65.00",
                  unit: "Rs/kWh",
                  price: "Rs.255287.25",
                  netTotal: "Rs.255287.25",
                  total: "Rs.255287.25",
                },
                {
                  meterName: "GF_AS_PSB-G-A1",
                  serialNo: "30",
                  fromDate: "01-06-2024",
                  toDate: "30-06-2024",
                  openRead: "41,003",
                  closeRead: "41,546",
                  itemName: "ELECTRICITY",
                  quantity: "543.49",
                  units: "kWh",
                  unitPrice: "Rs.65.00",
                  unit: "Rs/kWh",
                  price: "Rs.255287.25",
                  netTotal: "Rs.255287.25",
                  total: "Rs.255287.25",
                },
              ],
            }),
          });

          // Assuming the response is a Blob containing the PDF data
          const blob = await response.blob();

          // Create a link element to trigger the download
          const link = document.createElement("a");
          link.href = URL.createObjectURL(blob);
          link.download = "generated.pdf";
          link.click();
        });
    </script>
  </body>
</html>
